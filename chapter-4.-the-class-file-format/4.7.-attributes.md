# 4.7. Attributes

_Attributes_ are used in the `ClassFile`, `field_info`, `method_info`, and `Code_attribute` structures of the `class` file format \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1), [§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5), [§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6), [§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3)\).

All attributes have the following general format:

```text
attribute_info {
    u2 attribute_name_index;
    u4 attribute_length;
    u1 info[attribute_length];
}
```

For all attributes, the `attribute_name_index` must be a valid unsigned 16-bit index into the constant pool of the class. The `constant_pool` entry at `attribute_name_index` must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the name of the attribute. The value of the `attribute_length` item indicates the length of the subsequent information in bytes. The length does not include the initial six bytes that contain the `attribute_name_index` and `attribute_length` items.

23 attributes are predefined by this specification. They are listed three times, for ease of navigation:

* [Table 4.7-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7-300) is ordered by the attributes' section numbers in this chapter. Each attribute is accompanied by the first version of the `class` file format in which it was defined, and the corresponding version of the Java SE platform. \(For old `class` file versions, the JDK release is used instead of the Java SE platform version\).
* [Table 4.7-B](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7-310) is orderd by the first version of the `class` file format in which each attribute was defined.
* [Table 4.7-C](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7-320) is ordered by the location in a `class` file where each attribute is defined to appear.

Within the context of their use in this specification, that is, in the `attributes` tables of the `class` file structures in which they appear, the names of these predefined attributes are reserved.

Any conditions on the presence of a predefined attribute in an `attributes` table are specified explicitly in the section which describes the attribute. If no conditions are specified, then the attribute may appear any number of times in an `attributes` table.

The predefined attributes are categorized into three groups according to their purpose:

1. Five attributes are critical to correct interpretation of the `class` file by the Java Virtual Machine:

   * `ConstantValue`
   * `Code`
   * `StackMapTable`
   * `Exceptions`
   * `BootstrapMethods`

   In a `class` file of version V, each of these attributes must be recognized and correctly read by an implementation of the Java Virtual Machine if the implementation recognizes `class` files of version V, and V is at least the version where the attribute was first defined, and the attribute appears in a location where it is defined to appear.

2. Twelve attributes are critical to correct interpretation of the `class` file by the class libraries of the Java SE platform:

   * `InnerClasses`
   * `EnclosingMethod`
   * `Synthetic`
   * `Signature`
   * `RuntimeVisibleAnnotations`
   * `RuntimeInvisibleAnnotations`
   * `RuntimeVisibleParameterAnnotations`
   * `RuntimeInvisibleParameterAnnotations`
   * `RuntimeVisibleTypeAnnotations`
   * `RuntimeInvisibleTypeAnnotations`
   * `AnnotationDefault`
   * `MethodParameters`

   Each of these attributes in a `class` file of version V must be recognized and correctly read by an implementation of the class libraries of the Java SE platform if the implementation recognizes `class` files of version V, and V is at least the version where the attribute was first defined, and the attribute appears in a location where it is defined to appear.

3. Six attributes are not critical to correct interpretation of the `class` file by either the Java Virtual Machine or the class libraries of the Java SE platform, but are useful for tools:

   * `SourceFile`
   * `SourceDebugExtension`
   * `LineNumberTable`
   * `LocalVariableTable`
   * `LocalVariableTypeTable`
   * `Deprecated`

   Use of these attributes by an implementation of the Java Virtual Machine or the class libraries of the Java SE platform is optional. An implementation may use the information that these attributes contain, or otherwise must silently ignore these attributes.

**Table 4.7-A. Predefined `class` file attributes \(by section\)**

| Attribute | Section | `class` file | Java SE |
| :--- | :--- | :--- | :--- |
| `ConstantValue` | [§4.7.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.2) | 45.3 | 1.0.2 |
| `Code` | [§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3) | 45.3 | 1.0.2 |
| `StackMapTable` | [§4.7.4](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.4) | 50.0 | 6 |
| `Exceptions` | [§4.7.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.5) | 45.3 | 1.0.2 |
| `InnerClasses` | [§4.7.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.6) | 45.3 | 1.1 |
| `EnclosingMethod` | [§4.7.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.7) | 49.0 | 5.0 |
| `Synthetic` | [§4.7.8](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.8) | 45.3 | 1.1 |
| `Signature` | [§4.7.9](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.9) | 49.0 | 5.0 |
| `SourceFile` | [§4.7.10](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.10) | 45.3 | 1.0.2 |
| `SourceDebugExtension` | [§4.7.11](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.11) | 49.0 | 5.0 |
| `LineNumberTable` | [§4.7.12](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.12) | 45.3 | 1.0.2 |
| `LocalVariableTable` | [§4.7.13](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.13) | 45.3 | 1.0.2 |
| `LocalVariableTypeTable` | [§4.7.14](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.14) | 49.0 | 5.0 |
| `Deprecated` | [§4.7.15](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.15) | 45.3 | 1.1 |
| `RuntimeVisibleAnnotations` | [§4.7.16](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16) | 49.0 | 5.0 |
| `RuntimeInvisibleAnnotations` | [§4.7.17](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.17) | 49.0 | 5.0 |
| `RuntimeVisibleParameterAnnotations` | [§4.7.18](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.18) | 49.0 | 5.0 |
| `RuntimeInvisibleParameterAnnotations` | [§4.7.19](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.19) | 49.0 | 5.0 |
| `RuntimeVisibleTypeAnnotations` | [§4.7.20](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20) | 52.0 | 8 |
| `RuntimeInvisibleTypeAnnotations` | [§4.7.21](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.21) | 52.0 | 8 |
| `AnnotationDefault` | [§4.7.22](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.22) | 49.0 | 5.0 |
| `BootstrapMethods` | [§4.7.23](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.23) | 51.0 | 7 |
| `MethodParameters` | [§4.7.24](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.24) | 52.0 | 8 |

**Table 4.7-B. Predefined `class` file attributes \(by `class` file version\)**

| Attribute | `class` file | Java SE | Section |
| :--- | :--- | :--- | :--- |
| `ConstantValue` | 45.3 | 1.0.2 | [§4.7.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.2) |
| `Code` | 45.3 | 1.0.2 | [§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3) |
| `Exceptions` | 45.3 | 1.0.2 | [§4.7.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.5) |
| `SourceFile` | 45.3 | 1.0.2 | [§4.7.10](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.10) |
| `LineNumberTable` | 45.3 | 1.0.2 | [§4.7.12](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.12) |
| `LocalVariableTable` | 45.3 | 1.0.2 | [§4.7.13](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.13) |
| `InnerClasses` | 45.3 | 1.1 | [§4.7.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.6) |
| `Synthetic` | 45.3 | 1.1 | [§4.7.8](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.8) |
| `Deprecated` | 45.3 | 1.1 | [§4.7.15](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.15) |
| `EnclosingMethod` | 49.0 | 5.0 | [§4.7.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.7) |
| `Signature` | 49.0 | 5.0 | [§4.7.9](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.9) |
| `SourceDebugExtension` | 49.0 | 5.0 | [§4.7.11](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.11) |
| `LocalVariableTypeTable` | 49.0 | 5.0 | [§4.7.14](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.14) |
| `RuntimeVisibleAnnotations` | 49.0 | 5.0 | [§4.7.16](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16) |
| `RuntimeInvisibleAnnotations` | 49.0 | 5.0 | [§4.7.17](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.17) |
| `RuntimeVisibleParameterAnnotations` | 49.0 | 5.0 | [§4.7.18](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.18) |
| `RuntimeInvisibleParameterAnnotations` | 49.0 | 5.0 | [§4.7.19](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.19) |
| `AnnotationDefault` | 49.0 | 5.0 | [§4.7.22](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.22) |
| `StackMapTable` | 50.0 | 6 | [§4.7.4](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.4) |
| `BootstrapMethods` | 51.0 | 7 | [§4.7.23](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.23) |
| `RuntimeVisibleTypeAnnotations` | 52.0 | 8 | [§4.7.20](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20) |
| `RuntimeInvisibleTypeAnnotations` | 52.0 | 8 | [§4.7.21](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.21) |
| `MethodParameters` | 52.0 | 8 | [§4.7.24](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.24) |

**Table 4.7-C. Predefined `class` file attributes \(by location\)**

| Attribute | Location | `class` file |
| :--- | :--- | :--- |
| `SourceFile` | `ClassFile` | 45.3 |
| `InnerClasses` | `ClassFile` | 45.3 |
| `EnclosingMethod` | `ClassFile` | 49.0 |
| `SourceDebugExtension` | `ClassFile` | 49.0 |
| `BootstrapMethods` | `ClassFile` | 51.0 |
| `ConstantValue` | `field_info` | 45.3 |
| `Code` | `method_info` | 45.3 |
| `Exceptions` | `method_info` | 45.3 |
| `RuntimeVisibleParameterAnnotations`, `RuntimeInvisibleParameterAnnotations` | `method_info` | 49.0 |
| `AnnotationDefault` | `method_info` | 49.0 |
| `MethodParameters` | `method_info` | 52.0 |
| `Synthetic` | `ClassFile`, `field_info`, `method_info` | 45.3 |
| `Deprecated` | `ClassFile`, `field_info`, `method_info` | 45.3 |
| `Signature` | `ClassFile`, `field_info`, `method_info` | 49.0 |
| `RuntimeVisibleAnnotations`, `RuntimeInvisibleAnnotations` | `ClassFile`, `field_info`, `method_info` | 49.0 |
| `LineNumberTable` | `Code` | 45.3 |
| `LocalVariableTable` | `Code` | 45.3 |
| `LocalVariableTypeTable` | `Code` | 49.0 |
| `StackMapTable` | `Code` | 50.0 |
| `RuntimeVisibleTypeAnnotations`, `RuntimeInvisibleTypeAnnotations` | `ClassFile`, `field_info`, `method_info`, `Code` | 52.0 |

#### 4.7.1. Defining and Naming New Attributes

Compilers are permitted to define and emit `class` files containing new attributes in the `attributes` tables of `class` file structures, `field_info` structures, `method_info` structures, and `Code` attributes \([§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3)\). Java Virtual Machine implementations are permitted to recognize and use new attributes found in these `attributes` tables. However, any attribute not defined as part of the `class` file specification must not affect the semantics of the `class` file. Java Virtual Machine implementations are required to silently ignore attributes they do not recognize.

For instance, defining a new attribute to support vendor-specific debugging is permitted. Because Java Virtual Machine implementations are required to ignore attributes they do not recognize, `class` files intended for that particular Java Virtual Machine implementation will be usable by other implementations even if those implementations cannot make use of the additional debugging information that the `class` files contain.

Java Virtual Machine implementations are specifically prohibited from throwing an exception or otherwise refusing to use `class` files simply because of the presence of some new attribute. Of course, tools operating on `class` files may not run correctly if given `class` files that do not contain all the attributes they require.

Two attributes that are intended to be distinct, but that happen to use the same attribute name and are of the same length, will conflict on implementations that recognize either attribute. Attributes defined other than in this specification must have names chosen according to the package naming convention described in _The Java Language Specification, Java SE 8 Edition_ \(JLS §6.1\).

Future versions of this specification may define additional attributes.

#### 4.7.2. The `ConstantValue` Attribute

The `ConstantValue` attribute is a fixed-length attribute in the `attributes` table of a `field_info` structure \([§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5)\). A `ConstantValue` attribute represents the value of a constant expression \(JLS §15.28\), and is used as follows:

* If the `ACC_STATIC` flag in the `access_flags` item of the `field_info` structure is set, then the field represented by the `field_info` structure is assigned the value represented by its `ConstantValue` attribute as part of the initialization of the class or interface declaring the field \([§5.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.5)\). This occurs prior to the invocation of the class or interface initialization method of that class or interface \([§2.9](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.9)\).
* Otherwise, the Java Virtual Machine must silently ignore the attribute.

There may be at most one `ConstantValue` attribute in the `attributes` table of a `field_info` structure.

The `ConstantValue` attribute has the following format:

```text
ConstantValue_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 constantvalue_index;
}
```

The items of the `ConstantValue_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`ConstantValue`".attribute\_length

The value of the `attribute_length` item of a `ConstantValue_attribute` structure must be two.constantvalue\_index

The value of the `constantvalue_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index gives the constant value represented by this attribute. The `constant_pool` entry must be of a type appropriate to the field, as specified in [Table 4.7.2-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.2-300-C.1).

**Table 4.7.2-A. Constant value attribute types**

| Field Type | Entry Type |
| :--- | :--- |
| `long` | `CONSTANT_Long` |
| `float` | `CONSTANT_Float` |
| `double` | `CONSTANT_Double` |
| `int`, `short`, `char`, `byte`, `boolean` | `CONSTANT_Integer` |
| `String` | `CONSTANT_String` |

#### 4.7.3. The `Code` Attribute

The `Code` attribute is a variable-length attribute in the `attributes` table of a `method_info` structure \([§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). A `Code` attribute contains the Java Virtual Machine instructions and auxiliary information for a method, including an instance initialization method or a class or interface initialization method \([§2.9](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.9)\).

If the method is either `native` or `abstract`, its `method_info` structure must not have a `Code` attribute in its `attributes` table. Otherwise, its `method_info` structure must have exactly one `Code` attribute in its `attributes` table.

The `Code` attribute has the following format:

```text
Code_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 max_stack;
    u2 max_locals;
    u4 code_length;
    u1 code[code_length];
    u2 exception_table_length;
    {   u2 start_pc;
        u2 end_pc;
        u2 handler_pc;
        u2 catch_type;
    } exception_table[exception_table_length];
    u2 attributes_count;
    attribute_info attributes[attributes_count];
}
```

The items of the `Code_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`Code`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.max\_stack

The value of the `max_stack` item gives the maximum depth of the operand stack of this method \([§2.6.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.6.2)\) at any point during execution of the method.max\_locals

The value of the `max_locals` item gives the number of local variables in the local variable array allocated upon invocation of this method \([§2.6.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.6.1)\), including the local variables used to pass parameters to the method on its invocation.

The greatest local variable index for a value of type `long` or `double` is `max_locals - 2`. The greatest local variable index for a value of any other type is `max_locals - 1`.code\_length

The value of the `code_length` item gives the number of bytes in the `code` array for this method.

The value of `code_length` must be greater than zero \(as the `code` array must not be empty\) and less than 65536.code\[\]

The `code` array gives the actual bytes of Java Virtual Machine code that implement the method.

When the `code` array is read into memory on a byte-addressable machine, if the first byte of the array is aligned on a 4-byte boundary, the _tableswitch_ and _lookupswitch_ 32-bit offsets will be 4-byte aligned. \(Refer to the descriptions of those instructions for more information on the consequences of `code` array alignment.\)

The detailed constraints on the contents of the `code` array are extensive and are given in a separate section \([§4.9](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.9)\).exception\_table\_length

The value of the `exception_table_length` item gives the number of entries in the `exception_table` table.exception\_table\[\]

Each entry in the `exception_table` array describes one exception handler in the `code` array. The order of the handlers in the `exception_table` array is significant \([§2.10](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.10)\).

Each `exception_table` entry contains the following four items:start\_pc, end\_pc

The values of the two items `start_pc` and `end_pc` indicate the ranges in the `code` array at which the exception handler is active. The value of `start_pc` must be a valid index into the `code` array of the opcode of an instruction. The value of `end_pc` either must be a valid index into the `code` array of the opcode of an instruction or must be equal to `code_length`, the length of the `code` array. The value of `start_pc` must be less than the value of `end_pc`.

The `start_pc` is inclusive and `end_pc` is exclusive; that is, the exception handler must be active while the program counter is within the interval \[`start_pc`, `end_pc`\).

The fact that `end_pc` is exclusive is a historical mistake in the design of the Java Virtual Machine: if the Java Virtual Machine code for a method is exactly 65535 bytes long and ends with an instruction that is 1 byte long, then that instruction cannot be protected by an exception handler. A compiler writer can work around this bug by limiting the maximum size of the generated Java Virtual Machine code for any method, instance initialization method, or static initializer \(the size of any code array\) to 65534 bytes.handler\_pc

The value of the `handler_pc` item indicates the start of the exception handler. The value of the item must be a valid index into the `code` array and must be the index of the opcode of an instruction.catch\_type

If the value of the `catch_type` item is nonzero, it must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Class_info` structure \([§4.4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.1)\) representing a class of exceptions that this exception handler is designated to catch. The exception handler will be called only if the thrown exception is an instance of the given class or one of its subclasses.

The verifier checks that the class is `Throwable` or a subclass of `Throwable` \([§4.9.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.9.2)\).

If the value of the `catch_type` item is zero, this exception handler is called for all exceptions.

This is used to implement `finally` \([§3.13](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-3.html#jvms-3.13)\).attributes\_count

The value of the `attributes_count` item indicates the number of attributes of the `Code` attribute.attributes\[\]

Each value of the `attributes` table must be an `attribute_info` structure \([§4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7)\).

A `Code` attribute can have any number of optional attributes associated with it.

The attributes defined by this specification as appearing in the `attributes` table of a `Code` attribute are listed in [Table 4.7-C](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7-320).

The rules concerning attributes defined to appear in the `attributes` table of a `Code` attribute are given in [§4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7).

The rules concerning non-predefined attributes in the `attributes` table of a `Code` attribute are given in [§4.7.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.1).

#### 4.7.4. The `StackMapTable` Attribute

The `StackMapTable` attribute is a variable-length attribute in the `attributes` table of a `Code` attribute \([§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3)\). A `StackMapTable` attribute is used during the process of verification by type checking \([§4.10.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.1)\).

There may be at most one `StackMapTable` attribute in the `attributes` table of a `Code` attribute.

In a `class` file whose version number is 50.0 or above, if a method's `Code` attribute does not have a `StackMapTable` attribute, it has an _implicit stack map attribute_ \([§4.10.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.1)\). This implicit stack map attribute is equivalent to a `StackMapTable` attribute with `number_of_entries` equal to zero.

The `StackMapTable` attribute has the following format:

```text
StackMapTable_attribute {
    u2              attribute_name_index;
    u4              attribute_length;
    u2              number_of_entries;
    stack_map_frame entries[number_of_entries];
}
```

The items of the `StackMapTable_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`StackMapTable`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.number\_of\_entries

The value of the `number_of_entries` item gives the number of `stack_map_frame` entries in the `entries` table.entries\[\]

Each entry in the `entries` table describes one stack map frame of the method. The order of the stack map frames in the `entries` table is significant.

A _stack map frame_ specifies \(either explicitly or implicitly\) the bytecode offset at which it applies, and the verification types of local variables and operand stack entries for that offset.

Each stack map frame described in the `entries` table relies on the previous frame for some of its semantics. The first stack map frame of a method is implicit, and computed from the method descriptor by the type checker \([§4.10.1.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.1.6)\). The `stack_map_frame` structure at `entries[0]` therefore describes the second stack map frame of the method.

The _bytecode offset_ at which a stack map frame applies is calculated by taking the value `offset_delta` specified in the frame \(either explicitly or implicitly\), and adding `offset_delta + 1` to the bytecode offset of the previous frame, unless the previous frame is the initial frame of the method. In that case, the bytecode offset at which the stack map frame applies is the value `offset_delta` specified in the frame.

By using an offset delta rather than storing the actual bytecode offset, we ensure, by definition, that stack map frames are in the correctly sorted order. Furthermore, by consistently using the formula `offset_delta + 1` for all explicit frames \(as opposed to the implicit first frame\), we guarantee the absence of duplicates.

We say that an instruction in the bytecode has a _corresponding stack map frame_ if the instruction starts at offset _i_ in the `code` array of a `Code` attribute, and the `Code` attribute has a `StackMapTable` attribute whose `entries` array contains a stack map frame that applies at bytecode offset _i_.

A _verification type_ specifies the type of either one or two locations, where a _location_ is either a single local variable or a single operand stack entry. A verification type is represented by a discriminated union, `verification_type_info`, that consists of a one-byte tag, indicating which item of the union is in use, followed by zero or more bytes, giving more information about the tag.

```text
union verification_type_info {
    Top_variable_info;
    Integer_variable_info;
    Float_variable_info;
    Long_variable_info;
    Double_variable_info;
    Null_variable_info;
    UninitializedThis_variable_info;
    Object_variable_info;
    Uninitialized_variable_info;
}
```

A verification type that specifies one location in the local variable array or in the operand stack is represented by the following items of the `verification_type_info` union:

* The `Top_variable_info` item indicates that the local variable has the verification type `top`.

  ```text
  Top_variable_info {
      u1 tag = ITEM_Top; /* 0 */
  }
  ```

* The `Integer_variable_info` item indicates that the location has the verification type `int`.

  ```text
  Integer_variable_info {
      u1 tag = ITEM_Integer; /* 1 */
  }
  ```

* The `Float_variable_info` item indicates that the location has the verification type `float`.

  ```text
  Float_variable_info {
      u1 tag = ITEM_Float; /* 2 */
  }
  ```

* The `Null_variable_info` type indicates that the location has the verification type `null`.

  ```text
  Null_variable_info {
      u1 tag = ITEM_Null; /* 5 */
  }
  ```

* The `UninitializedThis_variable_info` item indicates that the location has the verification type `uninitializedThis`.

  ```text
  UninitializedThis_variable_info {
      u1 tag = ITEM_UninitializedThis; /* 6 */
  }
  ```

* The `Object_variable_info` item indicates that the location has the verification type which is the class represented by the `CONSTANT_Class_info` structure \([§4.4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.1)\) found in the `constant_pool` table at the index given by `cpool_index`.

  ```text
  Object_variable_info {
      u1 tag = ITEM_Object; /* 7 */
      u2 cpool_index;
  }
  ```

* The `Uninitialized_variable_info` item indicates that the location has the verification type `uninitialized(Offset)`. The `Offset` item indicates the offset, in the `code` array of the `Code` attribute that contains this `StackMapTable` attribute, of the _new_ instruction \([§_new_](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.new)\) that created the object being stored in the location.

  ```text
  Uninitialized_variable_info {
      u1 tag = ITEM_Uninitialized; /* 8 */
      u2 offset;
  }
  ```

A verification type that specifies two locations in the local variable array or in the operand stack is represented by the following items of the `verification_type_info` union:

* The `Long_variable_info` item indicates that the first of two locations has the verification type `long`.

  ```text
  Long_variable_info {
      u1 tag = ITEM_Long; /* 4 */
  }
  ```

* The `Double_variable_info` item indicates that the first of two locations has the verification type `double`.

  ```text
  Double_variable_info {
      u1 tag = ITEM_Double; /* 3 */
  }
  ```

* The `Long_variable_info` and `Double_variable_info` items indicate the verification type of the second of two locations as follows:
  * If the first of the two locations is a local variable, then:
    * It must not be the local variable with the highest index.
    * The next higher numbered local variable has the verification type `top`.
  * If the first of the two locations is an operand stack entry, then:
    * It must not be the topmost location of the operand stack.
    * The next location closer to the top of the operand stack has the verification type `top`.

A stack map frame is represented by a discriminated union, `stack_map_frame`, which consists of a one-byte tag, indicating which item of the union is in use, followed by zero or more bytes, giving more information about the tag.

```text
union stack_map_frame {
    same_frame;
    same_locals_1_stack_item_frame;
    same_locals_1_stack_item_frame_extended;
    chop_frame;
    same_frame_extended;
    append_frame;
    full_frame;
}
```

The tag indicates the _frame type_ of the stack map frame:

* The frame type `same_frame` is represented by tags in the range \[0-63\]. This frame type indicates that the frame has exactly the same local variables as the previous frame and that the operand stack is empty. The `offset_delta` value for the frame is the value of the tag item, `frame_type`.

  ```text
  same_frame {
      u1 frame_type = SAME; /* 0-63 */
  }
  ```

* The frame type `same_locals_1_stack_item_frame` is represented by tags in the range \[64, 127\]. This frame type indicates that the frame has exactly the same local variables as the previous frame and that the operand stack has one entry. The `offset_delta` value for the frame is given by the formula `frame_type - 64`. The verification type of the one stack entry appears after the frame type.

  ```text
  same_locals_1_stack_item_frame {
      u1 frame_type = SAME_LOCALS_1_STACK_ITEM; /* 64-127 */
      verification_type_info stack[1];
  }
  ```

* Tags in the range \[128-246\] are reserved for future use.
* The frame type `same_locals_1_stack_item_frame_extended` is represented by the tag 247. This frame type indicates that the frame has exactly the same local variables as the previous frame and that the operand stack has one entry. The `offset_delta` value for the frame is given explicitly, unlike in the frame type `same_locals_1_stack_item_frame`. The verification type of the one stack entry appears after `offset_delta`.

  ```text
  same_locals_1_stack_item_frame_extended {
      u1 frame_type = SAME_LOCALS_1_STACK_ITEM_EXTENDED; /* 247 */
      u2 offset_delta;
      verification_type_info stack[1];
  }
  ```

* The frame type `chop_frame` is represented by tags in the range \[248-250\]. This frame type indicates that the frame has the same local variables as the previous frame except that the last _k_ local variables are absent, and that the operand stack is empty. The value of _k_ is given by the formula `251 - frame_type`. The `offset_delta` value for the frame is given explicitly.

  ```text
  chop_frame {
      u1 frame_type = CHOP; /* 248-250 */
      u2 offset_delta;
  }
  ```

  Assume the verification types of local variables in the previous frame are given by `locals`, an array structured as in the `full_frame` frame type. If `locals[M-1]` in the previous frame represented local variable X and `locals[M]` represented local variable Y, then the effect of removing one local variable is that `locals[M-1]` in the new frame represents local variable X and `locals[M]` is undefined.

  It is an error if _k_ is larger than the number of local variables in `locals` for the previous frame, that is, if the number of local variables in the new frame would be less than zero.

* The frame type `same_frame_extended` is represented by the tag 251. This frame type indicates that the frame has exactly the same local variables as the previous frame and that the operand stack is empty. The `offset_delta` value for the frame is given explicitly, unlike in the frame type `same_frame`.

  ```text
  same_frame_extended {
      u1 frame_type = SAME_FRAME_EXTENDED; /* 251 */
      u2 offset_delta;
  }
  ```

* The frame type `append_frame` is represented by tags in the range \[252-254\]. This frame type indicates that the frame has the same locals as the previous frame except that _k_ additional locals are defined, and that the operand stack is empty. The value of _k_ is given by the formula `frame_type - 251`. The `offset_delta` value for the frame is given explicitly.

  ```text
  append_frame {
      u1 frame_type = APPEND; /* 252-254 */
      u2 offset_delta;
      verification_type_info locals[frame_type - 251];
  }
  ```

  The 0th entry in `locals` represents the verification type of the first additional local variable. If `locals[M]` represents local variable `N`, then:

  * `locals[M+1]` represents local variable `N+1` if `locals[M]` is one of `Top_variable_info`, `Integer_variable_info`, `Float_variable_info`, `Null_variable_info`, `UninitializedThis_variable_info`, `Object_variable_info`, or `Uninitialized_variable_info`; and
  * `locals[M+1]` represents local variable `N+2` if `locals[M]` is either `Long_variable_info` or `Double_variable_info`.

  It is an error if, for any index _i_, `locals[`_`i`_`]` represents a local variable whose index is greater than the maximum number of local variables for the method.

* The frame type `full_frame` is represented by the tag 255. The `offset_delta` value for the frame is given explicitly.

  ```text
  full_frame {
      u1 frame_type = FULL_FRAME; /* 255 */
      u2 offset_delta;
      u2 number_of_locals;
      verification_type_info locals[number_of_locals];
      u2 number_of_stack_items;
      verification_type_info stack[number_of_stack_items];
  }
  ```

  The 0th entry in `locals` represents the verification type of local variable 0. If `locals[M]` represents local variable `N`, then:

  * `locals[M+1]` represents local variable `N+1` if `locals[M]` is one of `Top_variable_info`, `Integer_variable_info`, `Float_variable_info`, `Null_variable_info`, `UninitializedThis_variable_info`, `Object_variable_info`, or `Uninitialized_variable_info`; and
  * `locals[M+1]` represents local variable `N+2` if `locals[M]` is either `Long_variable_info` or `Double_variable_info`.

  It is an error if, for any index _i_, `locals[`_`i`_`]` represents a local variable whose index is greater than the maximum number of local variables for the method.

  The 0th entry in `stack` represents the verification type of the bottom of the operand stack, and subsequent entries in `stack` represent the verification types of stack entries closer to the top of the operand stack. We refer to the bottom of the operand stack as stack entry 0, and to subsequent entries of the operand stack as stack entry 1, 2, etc. If `stack[M]` represents stack entry `N`, then:

  * `stack[M+1]` represents stack entry `N+1` if `stack[M]` is one of `Top_variable_info`, `Integer_variable_info`, `Float_variable_info`, `Null_variable_info`, `UninitializedThis_variable_info`, `Object_variable_info`, or `Uninitialized_variable_info`; and
  * `stack[M+1]` represents stack entry `N+2` if `stack[M]` is either `Long_variable_info` or `Double_variable_info`.

  It is an error if, for any index _i_, `stack[`_`i`_`]` represents a stack entry whose index is greater than the maximum operand stack size for the method.

#### 4.7.5. The `Exceptions` Attribute

The `Exceptions` attribute is a variable-length attribute in the `attributes` table of a `method_info` structure \([§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). The `Exceptions` attribute indicates which checked exceptions a method may throw.

There may be at most one `Exceptions` attribute in the `attributes` table of a `method_info` structure.

The `Exceptions` attribute has the following format:

```text
Exceptions_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 number_of_exceptions;
    u2 exception_index_table[number_of_exceptions];
}
```

The items of the `Exceptions_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be the `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`Exceptions`".attribute\_length

The value of the `attribute_length` item indicates the attribute length, excluding the initial six bytes.number\_of\_exceptions

The value of the `number_of_exceptions` item indicates the number of entries in the `exception_index_table`.exception\_index\_table\[\]

Each value in the `exception_index_table` array must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Class_info` structure \([§4.4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.1)\) representing a class type that this method is declared to throw.

A method should throw an exception only if at least one of the following three criteria is met:

* The exception is an instance of `RuntimeException` or one of its subclasses.
* The exception is an instance of `Error` or one of its subclasses.
* The exception is an instance of one of the exception classes specified in the `exception_index_table` just described, or one of their subclasses.

These requirements are not enforced in the Java Virtual Machine; they are enforced only at compile time.

#### 4.7.6. The `InnerClasses` Attribute

The `InnerClasses` attribute is a variable-length attribute in the `attributes` table of a `ClassFile` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1)\).

If the constant pool of a class or interface C contains at least one `CONSTANT_Class_info` entry \([§4.4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.1)\) which represents a class or interface that is not a member of a package, then there must be exactly one `InnerClasses` attribute in the `attributes` table of the `ClassFile` structure for C.

The `InnerClasses` attribute has the following format:

```text
InnerClasses_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 number_of_classes;
    {   u2 inner_class_info_index;
        u2 outer_class_info_index;
        u2 inner_name_index;
        u2 inner_class_access_flags;
    } classes[number_of_classes];
}
```

The items of the `InnerClasses_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`InnerClasses`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.number\_of\_classes

The value of the `number_of_classes` item indicates the number of entries in the `classes` array.classes\[\]

Every `CONSTANT_Class_info` entry in the `constant_pool` table which represents a class or interface C that is not a package member must have exactly one corresponding entry in the `classes` array.

If a class or interface has members that are classes or interfaces, its `constant_pool` table \(and hence its `InnerClasses` attribute\) must refer to each such member \(JLS §13.1\), even if that member is not otherwise mentioned by the class.

In addition, the `constant_pool` table of every nested class and nested interface must refer to its enclosing class, so altogether, every nested class and nested interface will have `InnerClasses` information for each enclosing class and for each of its own nested classes and interfaces.

Each entry in the `classes` array contains the following four items:inner\_class\_info\_index

The value of the `inner_class_info_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Class_info` structure representing C. The remaining items in the `classes` array entry give information about C.outer\_class\_info\_index

If C is not a member of a class or an interface \(that is, if C is a top-level class or interface \(JLS §7.6\) or a local class \(JLS §14.3\) or an anonymous class \(JLS §15.9.5\)\), the value of the `outer_class_info_index` item must be zero.

Otherwise, the value of the `outer_class_info_index` item must be a valid index into the `constant_pool` table, and the entry at that index must be a `CONSTANT_Class_info` structure representing the class or interface of which C is a member.inner\_name\_index

If C is anonymous \(JLS §15.9.5\), the value of the `inner_name_index` item must be zero.

Otherwise, the value of the `inner_name_index` item must be a valid index into the `constant_pool` table, and the entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) that represents the original simple name of C, as given in the source code from which this `class` file was compiled.inner\_class\_access\_flags

The value of the `inner_class_access_flags` item is a mask of flags used to denote access permissions to and properties of class or interface C as declared in the source code from which this `class` file was compiled. It is used by a compiler to recover the original information when source code is not available. The flags are specified in [Table 4.7.6-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.6-300-D.1-D.1).

**Table 4.7.6-A. Nested class access and property flags**

| Flag Name | Value | Interpretation |
| :--- | :--- | :--- |
| `ACC_PUBLIC` | 0x0001 | Marked or implicitly `public` in source. |
| `ACC_PRIVATE` | 0x0002 | Marked `private` in source. |
| `ACC_PROTECTED` | 0x0004 | Marked `protected` in source. |
| `ACC_STATIC` | 0x0008 | Marked or implicitly `static` in source. |
| `ACC_FINAL` | 0x0010 | Marked `final` in source. |
| `ACC_INTERFACE` | 0x0200 | Was an `interface` in source. |
| `ACC_ABSTRACT` | 0x0400 | Marked or implicitly `abstract` in source. |
| `ACC_SYNTHETIC` | 0x1000 | Declared synthetic; not present in the source code. |
| `ACC_ANNOTATION` | 0x2000 | Declared as an annotation type. |
| `ACC_ENUM` | 0x4000 | Declared as an `enum` type. |

All bits of the `inner_class_access_flags` item not assigned in [Table 4.7.6-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.6-300-D.1-D.1) are reserved for future use. They should be set to zero in generated `class` files and should be ignored by Java Virtual Machine implementations.

If a `class` file has a version number that is 51.0 or above, and has an `InnerClasses` attribute in its `attributes` table, then for all entries in the `classes` array of the `InnerClasses` attribute, the value of the `outer_class_info_index` item must be zero if the value of the `inner_name_index` item is zero.

Oracle's Java Virtual Machine implementation does not check the consistency of an `InnerClasses` attribute against a `class` file representing a class or interface referenced by the attribute.

#### 4.7.7. The `EnclosingMethod` Attribute

The `EnclosingMethod` attribute is a fixed-length attribute in the `attributes` table of a `ClassFile` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1)\). A class must have an `EnclosingMethod` attribute if and only if it represents a local class or an anonymous class \(JLS §14.3, JLS §15.9.5\).

There may be at most one `EnclosingMethod` attribute in the `attributes` table of a `ClassFile` structure.

The `EnclosingMethod` attribute has the following format:

```text
EnclosingMethod_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 class_index;
    u2 method_index;
}
```

The items of the `EnclosingMethod_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`EnclosingMethod`".attribute\_length

The value of the `attribute_length` item must be four.class\_index

The value of the `class_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Class_info` structure \([§4.4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.1)\) representing the innermost class that encloses the declaration of the current class.method\_index

If the current class is not immediately enclosed by a method or constructor, then the value of the `method_index` item must be zero.

In particular, `method_index` must be zero if the current class was immediately enclosed in source code by an instance initializer, static initializer, instance variable initializer, or class variable initializer. \(The first two concern both local classes and anonymous classes, while the last two concern anonymous classes declared on the right hand side of a field assignment.\)

Otherwise, the value of the `method_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_NameAndType_info` structure \([§4.4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.6)\) representing the name and type of a method in the class referenced by the `class_index` attribute above.

It is the responsibility of a Java compiler to ensure that the method identified via the `method_index` is indeed the closest lexically enclosing method of the class that contains this `EnclosingMethod` attribute.

#### 4.7.8. The `Synthetic` Attribute

The `Synthetic` attribute is a fixed-length attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1), [§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5), [§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). A class member that does not appear in the source code must be marked using a `Synthetic` attribute, or else it must have its `ACC_SYNTHETIC` flag set. The only exceptions to this requirement are compiler-generated methods which are not considered implementation artifacts, namely the instance initialization method representing a default constructor of the Java programming language \([§2.9](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.9)\), the class initialization method \([§2.9](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.9)\), and the `Enum.values()` and `Enum.valueOf()` methods.

The `Synthetic` attribute was introduced in JDK 1.1 to support nested classes and interfaces.

The `Synthetic` attribute has the following format:

```text
Synthetic_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
}
```

The items of the `Synthetic_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`Synthetic`".attribute\_length

The value of the `attribute_length` item must be zero.

#### 4.7.9. The `Signature` Attribute

The `Signature` attribute is a fixed-length attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1), [§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5), [§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). A `Signature` attribute records a signature \([§4.7.9.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.9.1)\) for a class, interface, constructor, method, or field whose declaration in the Java programming language uses type variables or parameterized types. See _The Java Language Specification, Java SE 8 Edition_ for details about these types.

The `Signature` attribute has the following format:

```text
Signature_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 signature_index;
}
```

The items of the `Signature_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`Signature`".attribute\_length

The value of the `attribute_length` item of a `Signature_attribute` structure must be two.signature\_index

The value of the `signature_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a class signature if this `Signature` attribute is an attribute of a `ClassFile` structure; a method signature if this `Signature` attribute is an attribute of a `method_info` structure; or a field signature otherwise.

Oracle's Java Virtual Machine implementation does not check the well-formedness of `Signature` attributes during class loading or linking. Instead, `Signature` attributes are checked by methods of the Java SE platform class libraries which expose generic signatures of classes, interfaces, constructors, methods, and fields. Examples include `getGenericSuperclass` in `Class` and `toGenericString` in `java.lang.reflect.Executable`.

**4.7.9.1. Signatures**

_Signatures_ encode declarations written in the Java programming language that use types outside the type system of the Java Virtual Machine. They support reflection and debugging, as well as compilation when only `class` files are available.

A Java compiler must emit a signature for any class, interface, constructor, method, or field whose declaration uses type variables or parameterized types. Specifically, a Java compiler must emit:

* A class signature for any class or interface declaration which is either generic, or has a parameterized type as a superclass or superinterface, or both.
* A method signature for any method or constructor declaration which is either generic, or has a type variable or parameterized type as the return type or a formal parameter type, or has a type variable in a `throws` clause, or any combination thereof.

  If the `throws` clause of a method or constructor declaration does not involve type variables, then a compiler may treat the declaration as having no `throws` clause for the purpose of emitting a method signature.

* A field signature for any field, formal parameter, or local variable declaration whose type uses a type variable or a parameterized type.

Signatures are specified using a grammar which follows the notation of [§4.3.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.1). In addition to that notation:

* The syntax _\[x\]_ on the right-hand side of a production denotes zero or one occurrences of _x_. That is, _x_ is an _optional symbol_. The alternative which contains the optional symbol actually defines two alternatives: one that omits the optional symbol and one that includes it.
* A very long right-hand side may be continued on a second line by clearly indenting the second line.

The grammar includes the terminal symbol _Identifier_ to denote the name of a type, field, method, formal parameter, local variable, or type variable, as generated by a Java compiler. Such a name must not contain any of the ASCII characters `.` `;` `[` `/` `<` `>` `:` \(that is, the characters forbidden in method names \([§4.2.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2.2)\) and also colon\) but may contain characters that must not appear in an identifier in the Java programming language \(JLS §3.8\).

Signatures rely on a hierarchy of nonterminals known as _type signatures_:

* A _Java type signature_ represents either a reference type or a primitive type of the Java programming language.JavaTypeSignature:[ReferenceTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ReferenceTypeSignature)  
  [BaseType](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-BaseType)

  The following production from [§4.3.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.2) is repeated here for convenience:BaseType:\(one of\)  
  `B` `C` `D` `F` `I` `J` `S` `Z`

* A _reference type signature_ represents a reference type of the Java programming language, that is, a class or interface type, a type variable, or an array type.

  A _class type signature_ represents a \(possibly parameterized\) class or interface type. A class type signature must be formulated such that it can be reliably mapped to the binary name of the class it denotes by erasing any type arguments and converting each `.` character to a `$` character.

  A _type variable signature_ represents a type variable.

  An _array type signature_ represents one dimension of an array type.ReferenceTypeSignature:[ClassTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ClassTypeSignature)  
  [TypeVariableSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeVariableSignature)  
  [ArrayTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ArrayTypeSignature)ClassTypeSignature:`L` \[[PackageSpecifier](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-PackageSpecifier)\] [SimpleClassTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-SimpleClassTypeSignature) {[ClassTypeSignatureSuffix](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ClassTypeSignatureSuffix)} `;`PackageSpecifier:Identifier `/` {[PackageSpecifier](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-PackageSpecifier)}SimpleClassTypeSignature:Identifier \[[TypeArguments](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeArguments)\]TypeArguments:`<` [TypeArgument](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeArgument) {[TypeArgument](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeArgument)} `>`TypeArgument:\[[WildcardIndicator](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-WildcardIndicator)\] [ReferenceTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ReferenceTypeSignature)  
  `*`WildcardIndicator:`+`  
  `-`ClassTypeSignatureSuffix:`.` [SimpleClassTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-SimpleClassTypeSignature)TypeVariableSignature:`T` Identifier `;`ArrayTypeSignature:`[` [JavaTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-JavaTypeSignature)

A _class signature_ encodes type information about a \(possibly generic\) class declaration. It describes any type parameters of the class, and lists its \(possibly parameterized\) direct superclass and direct superinterfaces, if any. A type parameter is described by its name, followed by any class bound and interface bounds.ClassSignature:\[[TypeParameters](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeParameters)\] [SuperclassSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-SuperclassSignature) {[SuperinterfaceSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-SuperinterfaceSignature)}TypeParameters:`<` [TypeParameter](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeParameter) {[TypeParameter](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeParameter)} `>`TypeParameter:Identifier [ClassBound](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ClassBound) {[InterfaceBound](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-InterfaceBound)}ClassBound:`:` \[[ReferenceTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ReferenceTypeSignature)\]InterfaceBound:`:` [ReferenceTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ReferenceTypeSignature)SuperclassSignature:[ClassTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ClassTypeSignature)SuperinterfaceSignature:[ClassTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ClassTypeSignature)

A _method signature_ encodes type information about a \(possibly generic\) method declaration. It describes any type parameters of the method; the \(possibly parameterized\) types of any formal parameters; the \(possibly parameterized\) return type, if any; and the types of any exceptions declared in the method's `throws` clause.MethodSignature:\[[TypeParameters](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeParameters)\] `(` {[JavaTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-JavaTypeSignature)} `)` [Result](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-Result) {[ThrowsSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ThrowsSignature)}Result:[JavaTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-JavaTypeSignature)  
[VoidDescriptor](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-VoidDescriptor)ThrowsSignature:`^` [ClassTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ClassTypeSignature)  
`^` [TypeVariableSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-TypeVariableSignature)

The following production from [§4.3.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3) is repeated here for convenience:VoidDescriptor:`V`

Due to compiler-generated artifacts, the method signature of a method may not correspond exactly to the method descriptor of the method \([§4.3.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3)\). In particular, the number of formal parameter types in the method signature may be less than the number of parameter descriptors in the method descriptor.

A _field signature_ encodes the \(possibly parameterized\) type of a field, formal parameter, or local variable declaration.FieldSignature:[ReferenceTypeSignature](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-ReferenceTypeSignature)

#### 4.7.10. The `SourceFile` Attribute

The `SourceFile` attribute is an optional fixed-length attribute in the `attributes` table of a `ClassFile` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1)\).

There may be at most one `SourceFile` attribute in the `attributes` table of a `ClassFile` structure.

The `SourceFile` attribute has the following format:

```text
SourceFile_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 sourcefile_index;
}
```

The items of the `SourceFile_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`SourceFile`".attribute\_length

The value of the `attribute_length` item of a `SourceFile_attribute` structure must be two.sourcefile\_index

The value of the `sourcefile_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a string.

The string referenced by the `sourcefile_index` item will be interpreted as indicating the name of the source file from which this `class` file was compiled. It will not be interpreted as indicating the name of a directory containing the file or an absolute path name for the file; such platform-specific additional information must be supplied by the run-time interpreter or development tool at the time the file name is actually used.

#### 4.7.11. The `SourceDebugExtension` Attribute

The `SourceDebugExtension` attribute is an optional attribute in the `attributes` table of a `ClassFile` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1)\).

There may be at most one `SourceDebugExtension` attribute in the `attributes` table of a `ClassFile` structure.

The `SourceDebugExtension` attribute has the following format:

```text
SourceDebugExtension_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u1 debug_extension[attribute_length];
}
```

The items of the `SourceDebugExtension_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`SourceDebugExtension`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.debug\_extension\[\]

The `debug_extension` array holds extended debugging information which has no semantic effect on the Java Virtual Machine. The information is represented using a modified UTF-8 string \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) with no terminating zero byte.

Note that the `debug_extension` array may denote a string longer than that which can be represented with an instance of class `String`.

#### 4.7.12. The `LineNumberTable` Attribute

The `LineNumberTable` attribute is an optional variable-length attribute in the `attributes` table of a `Code` attribute \([§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3)\). It may be used by debuggers to determine which part of the `code` array corresponds to a given line number in the original source file.

If multiple `LineNumberTable` attributes are present in the `attributes` table of a `Code` attribute, then they may appear in any order.

There may be more than one `LineNumberTable` attribute _per line of a source file_ in the `attributes` table of a `Code` attribute. That is, `LineNumberTable` attributes may together represent a given line of a source file, and need not be one-to-one with source lines.

The `LineNumberTable` attribute has the following format:

```text
LineNumberTable_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 line_number_table_length;
    {   u2 start_pc;
        u2 line_number;	
    } line_number_table[line_number_table_length];
}
```

The items of the `LineNumberTable_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`LineNumberTable`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.line\_number\_table\_length

The value of the `line_number_table_length` item indicates the number of entries in the `line_number_table` array.line\_number\_table\[\]

Each entry in the `line_number_table` array indicates that the line number in the original source file changes at a given point in the `code` array. Each `line_number_table` entry must contain the following two items:start\_pc

The value of the `start_pc` item must indicate the index into the `code` array at which the code for a new line in the original source file begins.

The value of `start_pc` must be less than the value of the `code_length` item of the `Code` attribute of which this `LineNumberTable` is an attribute.line\_number

The value of the `line_number` item must give the corresponding line number in the original source file.

#### 4.7.13. The `LocalVariableTable` Attribute

The `LocalVariableTable` attribute is an optional variable-length attribute in the `attributes` table of a `Code` attribute \([§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3)\). It may be used by debuggers to determine the value of a given local variable during the execution of a method.

If multiple `LocalVariableTable` attributes are present in the `attributes` table of a `Code` attribute, then they may appear in any order.

There may be no more than one `LocalVariableTable` attribute _per local variable_ in the `attributes` table of a `Code` attribute.

The `LocalVariableTable` attribute has the following format:

```text
LocalVariableTable_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 local_variable_table_length;
    {   u2 start_pc;
        u2 length;
        u2 name_index;
        u2 descriptor_index;
        u2 index;
    } local_variable_table[local_variable_table_length];
}
```

The items of the `LocalVariableTable_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`LocalVariableTable`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.local\_variable\_table\_length

The value of the `local_variable_table_length` item indicates the number of entries in the `local_variable_table` array.local\_variable\_table\[\]

Each entry in the `local_variable_table` array indicates a range of `code` array offsets within which a local variable has a value. It also indicates the index into the local variable array of the current frame at which that local variable can be found. Each entry must contain the following five items:start\_pc, length

The given local variable must have a value at indices into the `code` array in the interval \[`start_pc`, `start_pc + length`\), that is, between `start_pc` inclusive and `start_pc + length` exclusive.

The value of `start_pc` must be a valid index into the `code` array of this `Code` attribute and must be the index of the opcode of an instruction.

The value of `start_pc + length` must either be a valid index into the `code` array of this `Code` attribute and be the index of the opcode of an instruction, or it must be the first index beyond the end of that `code` array.name\_index

The value of the `name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must contain a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a valid unqualified name denoting a local variable \([§4.2.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2.2)\).descriptor\_index

The value of the `descriptor_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must contain a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a field descriptor which encodes the type of a local variable in the source program \([§4.3.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.2)\).index

The given local variable must be at `index` in the local variable array of the current frame.

If the local variable at `index` is of type `double` or `long`, it occupies both `index` and `index + 1`.

#### 4.7.14. The `LocalVariableTypeTable` Attribute

The `LocalVariableTypeTable` attribute is an optional variable-length attribute in the `attributes` table of a `Code` attribute \([§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3)\). It may be used by debuggers to determine the value of a given local variable during the execution of a method.

If multiple `LocalVariableTypeTable` attributes are present in the `attributes` table of a given `Code` attribute, then they may appear in any order.

There may be no more than one `LocalVariableTypeTable` attribute _per local variable_ in the `attributes` table of a `Code` attribute.

The `LocalVariableTypeTable` attribute differs from the `LocalVariableTable` attribute \([§4.7.13](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.13)\) in that it provides signature information rather than descriptor information. This difference is only significant for variables whose type uses a type variable or parameterized type. Such variables will appear in both tables, while variables of other types will appear only in `LocalVariableTable`.

The `LocalVariableTypeTable` attribute has the following format:

```text
LocalVariableTypeTable_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 local_variable_type_table_length;
    {   u2 start_pc;
        u2 length;
        u2 name_index;
        u2 signature_index;
        u2 index;
    } local_variable_type_table[local_variable_type_table_length];
}
```

The items of the `LocalVariableTypeTable_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`LocalVariableTypeTable`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.local\_variable\_type\_table\_length

The value of the `local_variable_type_table_length` item indicates the number of entries in the `local_variable_type_table` array.local\_variable\_type\_table\[\]

Each entry in the `local_variable_type_table` array indicates a range of `code` array offsets within which a local variable has a value. It also indicates the index into the local variable array of the current frame at which that local variable can be found. Each entry must contain the following five items:start\_pc, length

The given local variable must have a value at indices into the `code` array in the interval \[`start_pc`, `start_pc + length`\), that is, between `start_pc` inclusive and `start_pc + length` exclusive.

The value of `start_pc` must be a valid index into the `code` array of this `Code` attribute and must be the index of the opcode of an instruction.

The value of `start_pc + length` must either be a valid index into the `code` array of this `Code` attribute and be the index of the opcode of an instruction, or it must be the first index beyond the end of that `code` array.name\_index

The value of the `name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must contain a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a valid unqualified name denoting a local variable \([§4.2.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2.2)\).signature\_index

The value of the `signature_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must contain a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a field signature which encodes the type of a local variable in the source program \([§4.7.9.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.9.1)\).index

The given local variable must be at `index` in the local variable array of the current frame.

If the local variable at `index` is of type `double` or `long`, it occupies both `index` and `index + 1`.

#### 4.7.15. The `Deprecated` Attribute

The `Deprecated` attribute is an optional fixed-length attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1), [§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5), [§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). A class, interface, method, or field may be marked using a `Deprecated` attribute to indicate that the class, interface, method, or field has been superseded.

A run-time interpreter or tool that reads the `class` file format, such as a compiler, can use this marking to advise the user that a superseded class, interface, method, or field is being referred to. The presence of a `Deprecated` attribute does not alter the semantics of a class or interface.

The `Deprecated` attribute has the following format:

```text
Deprecated_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
}
```

The items of the `Deprecated_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`Deprecated`".attribute\_length

The value of the `attribute_length` item must be zero.

#### 4.7.16. The `RuntimeVisibleAnnotations` Attribute

The `RuntimeVisibleAnnotations` attribute is a variable-length attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1), [§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5), [§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). The `RuntimeVisibleAnnotations` attribute records run-time visible annotations on the declaration of the corresponding class, field, or method. The Java Virtual Machine must make these annotations available so they can be returned by the appropriate reflective APIs.

There may be at most one `RuntimeVisibleAnnotations` attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure.

The `RuntimeVisibleAnnotations` attribute has the following format:

```text
RuntimeVisibleAnnotations_attribute {
    u2         attribute_name_index;
    u4         attribute_length;
    u2         num_annotations;
    annotation annotations[num_annotations];
}
```

The items of the `RuntimeVisibleAnnotations_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`RuntimeVisibleAnnotations`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.num\_annotations

The value of the `num_annotations` item gives the number of run-time visible annotations represented by the structure.annotations\[\]

Each entry in the `annotations` table represents a single run-time visible annotation on a declaration. The `annotation` structure has the following format:

```text
annotation {
    u2 type_index;
    u2 num_element_value_pairs;
    {   u2            element_name_index;
        element_value value;
    } element_value_pairs[num_element_value_pairs];
}
```

The items of the `annotation` structure are as follows:type\_index

The value of the `type_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a field descriptor \([§4.3.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.2)\). The field descriptor denotes the type of the annotation represented by this `annotation` structure.num\_element\_value\_pairs

The value of the `num_element_value_pairs` item gives the number of element-value pairs of the annotation represented by this `annotation` structure.element\_value\_pairs\[\]

Each value of the `element_value_pairs` table represents a single element-value pair in the annotation represented by this `annotation` structure. Each `element_value_pairs` entry contains the following two items:element\_name\_index

The value of the `element_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\). The `constant_pool` entry denotes the name of the element of the element-value pair represented by this `element_value_pairs` entry.

In other words, the entry denotes an element of the annotation type specified by `type_index`.value

The value of the `value` item represents the value of the element-value pair represented by this `element_value_pairs` entry.

**4.7.16.1. The element\_value structure**

The `element_value` structure is a discriminated union representing the value of an element-value pair. It has the following format:

```text
element_value {
    u1 tag;
    union {
        u2 const_value_index;

        {   u2 type_name_index;
            u2 const_name_index;
        } enum_const_value;

        u2 class_info_index;

        annotation annotation_value;

        {   u2            num_values;
            element_value values[num_values];
        } array_value;
    } value;
}
```

The `tag` item uses a single ASCII character to indicate the type of the value of the element-value pair. This determines which item of the `value` union is in use. [Table 4.7.16.1-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16.1-130) shows the valid characters for the `tag` item, the type indicated by each character, and the item used in the `value` union for each character. The table's fourth column is used in the description below of one item of the `value` union.

**Table 4.7.16.1-A. Interpretation of `tag` values as types**

| `tag` Item | Type | `value` Item | Constant Type |
| :--- | :--- | :--- | :--- |
| `B` | `byte` | `const_value_index` | `CONSTANT_Integer` |
| `C` | `char` | `const_value_index` | `CONSTANT_Integer` |
| `D` | `double` | `const_value_index` | `CONSTANT_Double` |
| `F` | `float` | `const_value_index` | `CONSTANT_Float` |
| `I` | `int` | `const_value_index` | `CONSTANT_Integer` |
| `J` | `long` | `const_value_index` | `CONSTANT_Long` |
| `S` | `short` | `const_value_index` | `CONSTANT_Integer` |
| `Z` | `boolean` | `const_value_index` | `CONSTANT_Integer` |
| `s` | `String` | `const_value_index` | `CONSTANT_Utf8` |
| `e` | Enum type | `enum_const_value` | _Not applicable_ |
| `c` | `Class` | `class_info_index` | _Not applicable_ |
| `@` | Annotation type | `annotation_value` | _Not applicable_ |
| `[` | Array type | `array_value` | _Not applicable_ |

The `value` item represents the value of an element-value pair. The item is a union, whose own items are as follows:const\_value\_index

The `const_value_index` item denotes either a primitive constant value or a `String` literal as the value of this element-value pair.

The value of the `const_value_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be of a type appropriate to the `tag` item, as specified in the fourth column of [Table 4.7.16.1-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16.1-130).enum\_const\_value

The `enum_const_value` item denotes an enum constant as the value of this element-value pair.

The `enum_const_value` item consists of the following two items:type\_name\_index

The value of the `type_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a field descriptor \([§4.3.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.2)\). The `constant_pool` entry gives the internal form of the binary name of the type of the enum constant represented by this `element_value` structure \([§4.2.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2.1)\).const\_name\_index

The value of the `const_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\). The `constant_pool` entry gives the simple name of the enum constant represented by this `element_value` structure.class\_info\_index

The `class_info_index` item denotes a class literal as the value of this element-value pair.

The `class_info_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing a return descriptor \([§4.3.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3)\). The return descriptor gives the type corresponding to the class literal represented by this `element_value` structure. Types correspond to class literals as follows:

* For a class literal C`.class`, where C is the name of a class, interface, or array type, the corresponding type is C. The return descriptor in the `constant_pool` will be an _ObjectType_ or an _ArrayType_.
* For a class literal p`.class`, where p is the name of a primitive type, the corresponding type is p. The return descriptor in the `constant_pool` will be a _BaseType_ character.
* For a class literal `void.class`, the corresponding type is `void`. The return descriptor in the `constant_pool` will be _V_.

For example, the class literal `Object.class` corresponds to the type `Object`, so the `constant_pool` entry is `Ljava/lang/Object;`, whereas the class literal `int.class` corresponds to the type `int`, so the `constant_pool` entry is `I`.

The class literal `void.class` corresponds to `void`, so the `constant_pool` entry is _V_, whereas the class literal `Void.class` corresponds to the type `Void`, so the `constant_pool` entry is `Ljava/lang/Void;`.annotation\_value

The `annotation_value` item denotes a "nested" annotation as the value of this element-value pair.

The value of the `annotation_value` item is an `annotation` structure \([§4.7.16](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16)\) that gives the annotation represented by this `element_value` structure.array\_value

The `array_value` item denotes an array as the value of this element-value pair.

The `array_value` item consists of the following two items:num\_values

The value of the `num_values` item gives the number of elements in the array represented by this `element_value` structure.values\[\]

Each value in the `values` table gives the corresponding element of the array represented by this `element_value` structure.

#### 4.7.17. The `RuntimeInvisibleAnnotations` Attribute

The `RuntimeInvisibleAnnotations` attribute is a variable-length attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1), [§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5), [§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). The `RuntimeInvisibleAnnotations` attribute records run-time invisible annotations on the declaration of the corresponding class, method, or field.

There may be at most one `RuntimeInvisibleAnnotations` attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure.

The `RuntimeInvisibleAnnotations` attribute is similar to the `RuntimeVisibleAnnotations` attribute \([§4.7.16](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16)\), except that the annotations represented by a `RuntimeInvisibleAnnotations` attribute must not be made available for return by reflective APIs, unless the Java Virtual Machine has been instructed to retain these annotations via some implementation-specific mechanism such as a command line flag. In the absence of such instructions, the Java Virtual Machine ignores this attribute.

The `RuntimeInvisibleAnnotations` attribute has the following format:

```text
RuntimeInvisibleAnnotations_attribute {
    u2         attribute_name_index;
    u4         attribute_length;
    u2         num_annotations;
    annotation annotations[num_annotations];
}
```

The items of the `RuntimeInvisibleAnnotations_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`RuntimeInvisibleAnnotations`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.num\_annotations

The value of the `num_annotations` item gives the number of run-time invisible annotations represented by the structure.annotations\[\]

Each entry in the `annotations` table represents a single run-time invisible annotation on a declaration. The `annotation` structure is specified in [§4.7.16](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16).

#### 4.7.18. The `RuntimeVisibleParameterAnnotations` Attribute

The `RuntimeVisibleParameterAnnotations` attribute is a variable-length attribute in the `attributes` table of the `method_info` structure \([§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). The `RuntimeVisibleParameterAnnotations` attribute records run-time visible annotations on the declarations of formal parameters of the corresponding method. The Java Virtual Machine must make these annotations available so they can be returned by the appropriate reflective APIs.

There may be at most one `RuntimeVisibleParameterAnnotations` attribute in the `attributes` table of a `method_info` structure.

The `RuntimeVisibleParameterAnnotations` attribute has the following format:

```text
RuntimeVisibleParameterAnnotations_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u1 num_parameters;
    {   u2         num_annotations;
        annotation annotations[num_annotations];
    } parameter_annotations[num_parameters];
}
```

The items of the `RuntimeVisibleParameterAnnotations_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`RuntimeVisibleParameterAnnotations`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.num\_parameters

The value of the `num_parameters` item gives the number of formal parameters of the method represented by the `method_info` structure on which the annotation occurs.

This duplicates information that could be extracted from the method descriptor.parameter\_annotations\[\]

Each entry in the `parameter_annotations` table represents all of the run-time visible annotations on the declaration of a single formal parameter. The _i_'th entry in the table corresponds to the _i_'th formal parameter in the method descriptor \([§4.3.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3)\). Each `parameter_annotations` entry contains the following two items:num\_annotations

The value of the `num_annotations` item indicates the number of run-time visible annotations on the declaration of the formal parameter corresponding to the `parameter_annotations` entry.annotations\[\]

Each entry in the `annotations` table represents a single run-time visible annotation on the declaration of the formal parameter corresponding to the `parameter_annotations` entry. The `annotation` structure is specified in [§4.7.16](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16).

#### 4.7.19. The `RuntimeInvisibleParameterAnnotations` Attribute

The `RuntimeInvisibleParameterAnnotations` attribute is a variable-length attribute in the `attributes` table of a `method_info` structure \([§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). The `RuntimeInvisibleParameterAnnotations` attribute records run-time invisible annotations on the declarations of formal parameters of the corresponding method.

There may be at most one `RuntimeInvisibleParameterAnnotations` attribute in the `attributes` table of a `method_info` structure.

The `RuntimeInvisibleParameterAnnotations` attribute is similar to the `RuntimeVisibleParameterAnnotations` attribute \([§4.7.18](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.18)\), except that the annotations represented by a `RuntimeInvisibleParameterAnnotations` attribute must not be made available for return by reflective APIs, unless the Java Virtual Machine has specifically been instructed to retain these annotations via some implementation-specific mechanism such as a command line flag. In the absence of such instructions, the Java Virtual Machine ignores this attribute.

The `RuntimeInvisibleParameterAnnotations` attribute has the following format:

```text
RuntimeInvisibleParameterAnnotations_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u1 num_parameters;
    {   u2         num_annotations;
        annotation annotations[num_annotations];
    } parameter_annotations[num_parameters];
}
```

The items of the `RuntimeInvisibleParameterAnnotations_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`RuntimeInvisibleParameterAnnotations`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.num\_parameters

The value of the `num_parameters` item gives the number of formal parameters of the method represented by the `method_info` structure on which the annotation occurs.

This duplicates information that could be extracted from the method descriptor.parameter\_annotations\[\]

Each entry in the `parameter_annotations` table represents all of the run-time invisible annotations on the declaration of a single formal parameter. The _i_'th entry in the table corresponds to the _i_'th formal parameter in the method descriptor \([§4.3.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3)\). Each `parameter_annotations` entry contains the following two items:num\_annotations

The value of the `num_annotations` item indicates the number of run-time invisible annotations on the declaration of the formal parameter corresponding to the `parameter_annotations` entry.annotations\[\]

Each entry in the `annotations` table represents a single run-time invisible annotation on the declaration of the formal parameter corresponding to the `parameter_annotations` entry. The `annotation` structure is specified in [§4.7.16](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16).

#### 4.7.20. The `RuntimeVisibleTypeAnnotations` Attribute

The `RuntimeVisibleTypeAnnotations` attribute is an variable-length attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure, or `Code` attribute \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1), [§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5), [§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6), [§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3)\). The `RuntimeVisibleTypeAnnotations` attribute records run-time visible annotations on types used in the declaration of the corresponding class, field, or method, or in an expression in the corresponding method body. The `RuntimeVisibleTypeAnnotations` attribute also records run-time visible annotations on type parameter declarations of generic classes, interfaces, methods, and constructors. The Java Virtual Machine must make these annotations available so they can be returned by the appropriate reflective APIs.

There may be at most one `RuntimeVisibleTypeAnnotations` attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure, or `Code` attribute.

An `attributes` table contains a `RuntimeVisibleTypeAnnotations` attribute only if types are annotated in kinds of declaration or expression that correspond to the parent structure or attribute of the `attributes` table.

For example, all annotations on types in the `implements` clause of a class declaration are recorded in the `RuntimeVisibleTypeAnnotations` attribute of the class's `ClassFile` structure. Meanwhile, all annotations on the type in a field declaration are recorded in the `RuntimeVisibleTypeAnnotations` attribute of the field's `field_info` structure.

The `RuntimeVisibleTypeAnnotations` attribute has the following format:

```text
RuntimeVisibleTypeAnnotations_attribute {
    u2              attribute_name_index;
    u4              attribute_length;
    u2              num_annotations;
    type_annotation annotations[num_annotations];
}
```

The items of the `RuntimeVisibleTypeAnnotations_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure representing the string "`RuntimeVisibleTypeAnnotations`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.num\_annotations

The value of the `num_annotations` item gives the number of run-time visible type annotations represented by the structure.annotations\[\]

Each entry in the `annotations` table represents a single run-time visible annotation on a type used in a declaration or expression. The `type_annotation` structure has the following format:

```text
type_annotation {
    u1 target_type;
    union {
        type_parameter_target;
        supertype_target;
        type_parameter_bound_target;
        empty_target;
        method_formal_parameter_target;
        throws_target;
        localvar_target;
        catch_target;
        offset_target;
        type_argument_target;
    } target_info;
    type_path target_path;
    u2        type_index;
    u2        num_element_value_pairs;
    {   u2            element_name_index;
        element_value value;
    } element_value_pairs[num_element_value_pairs];
}
```

The first three items - `target_type`, `target_info`, and `target_path` - specify the precise location of the annotated type. The last three items - `type_index`, `num_element_value_pairs`, and `element_value_pairs[]` - specify the annotation's own type and element-value pairs.

The items of the `type_annotation` structure are as follows:target\_type

The value of the `target_type` item denotes the kind of target on which the annotation appears. The various kinds of target correspond to the _type contexts_ of the Java programming language where types are used in declarations and expressions \(JLS §4.11\).

The legal values of `target_type` are specified in [Table 4.7.20-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20-400) and [Table 4.7.20-B](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20-410). Each value is a one-byte tag indicating which item of the `target_info` union follows the `target_type` item to give more information about the target.

The kinds of target in [Table 4.7.20-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20-400) and [Table 4.7.20-B](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20-410) correspond to the type contexts in JLS §4.11. Namely, `target_type` values 0x10-0x17 and 0x40-0x42 correspond to type contexts 1-10, while `target_type` values 0x43-0x4B correspond to type contexts 11-16.

The value of the `target_type` item determines whether the `type_annotation` structure appears in a `RuntimeVisibleTypeAnnotations` attribute in a `ClassFile` structure, a `field_info` structure, a `method_info` structure, or a `Code` attribute. [Table 4.7.20-C](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20-420) gives the location of the `RuntimeVisibleTypeAnnotations` attribute for a `type_annotation` structure with each legal `target_type` value.target\_info

The value of the `target_info` item denotes precisely which type in a declaration or expression is annotated.

The items of the `target_info` union are specified in [§4.7.20.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20.1).target\_path

The value of the `target_path` item denotes precisely which part of the type indicated by `target_info` is annotated.

The format of the `type_path` structure is specified in [§4.7.20.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20.2).type\_index, num\_element\_value\_pairs, element\_value\_pairs\[\]

The meaning of these items in the `type_annotation` structure is the same as their meaning in the `annotation` structure \([§4.7.16](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.16)\).

**Table 4.7.20-A. Interpretation of `target_type` values \(Part 1\)**

| Value | Kind of target | `target_info` item |
| :--- | :--- | :--- |
| 0x00 | type parameter declaration of generic class or interface | `type_parameter_target` |
| 0x01 | type parameter declaration of generic method or constructor | `type_parameter_target` |
| 0x10 | type in `extends` or `implements` clause of class declaration \(including the direct superclass or direct superinterface of an anonymous class declaration\), or in `extends` clause of interface declaration | `supertype_target` |
| 0x11 | type in bound of type parameter declaration of generic class or interface | `type_parameter_bound_target` |
| 0x12 | type in bound of type parameter declaration of generic method or constructor | `type_parameter_bound_target` |
| 0x13 | type in field declaration | `empty_target` |
| 0x14 | return type of method, or type of newly constructed object | `empty_target` |
| 0x15 | receiver type of method or constructor | `empty_target` |
| 0x16 | type in formal parameter declaration of method, constructor, or lambda expression | `formal_parameter_target` |
| 0x17 | type in `throws` clause of method or constructor | `throws_target` |

**Table 4.7.20-B. Interpretation of `target_type` values \(Part 2\)**

| Value | Kind of target | `target_info` item |
| :--- | :--- | :--- |
| 0x40 | type in local variable declaration | `localvar_target` |
| 0x41 | type in resource variable declaration | `localvar_target` |
| 0x42 | type in exception parameter declaration | `catch_target` |
| 0x43 | type in _instanceof_ expression | `offset_target` |
| 0x44 | type in _new_ expression | `offset_target` |
| 0x45 | type in method reference expression using `::`_new_ | `offset_target` |
| 0x46 | type in method reference expression using `::`_Identifier_ | `offset_target` |
| 0x47 | type in cast expression | `type_argument_target` |
| 0x48 | type argument for generic constructor in _new_ expression or explicit constructor invocation statement | `type_argument_target` |
| 0x49 | type argument for generic method in method invocation expression | `type_argument_target` |
| 0x4A | type argument for generic constructor in method reference expression using `::`_new_ | `type_argument_target` |
| 0x4B | type argument for generic method in method reference expression using `::`_Identifier_ | `type_argument_target` |

**Table 4.7.20-C. Location of enclosing attribute for `target_type` values**

| Value | Kind of target | Location |
| :--- | :--- | :--- |
| 0x00 | type parameter declaration of generic class or interface | `ClassFile` |
| 0x01 | type parameter declaration of generic method or constructor | `method_info` |
| 0x10 | type in `extends` clause of class or interface declaration, or in `implements` clause of interface declaration | `ClassFile` |
| 0x11 | type in bound of type parameter declaration of generic class or interface | `ClassFile` |
| 0x12 | type in bound of type parameter declaration of generic method or constructor | `method_info` |
| 0x13 | type in field declaration | `field_info` |
| 0x14 | return type of method or constructor | `method_info` |
| 0x15 | receiver type of method or constructor | `method_info` |
| 0x16 | type in formal parameter declaration of method, constructor, or lambda expression | `method_info` |
| 0x17 | type in `throws` clause of method or constructor | `method_info` |
| 0x40-0x4B | types in local variable declarations, resource variable declarations, exception parameter declarations, expressions | `Code` |

**4.7.20.1. The target\_info union**

The items of the `target_info` union \(except for the first\) specify precisely which type in a declaration or expression is annotated. The first item specifies not which type, but rather which declaration of a type parameter is annotated. The items are as follows:

* The `type_parameter_target` item indicates that an annotation appears on the declaration of the _i_'th type parameter of a generic class, generic interface, generic method, or generic constructor.

  ```text
  type_parameter_target {
      u1 type_parameter_index;
  }
  ```

  The value of the `type_parameter_index` item specifies which type parameter declaration is annotated. A `type_parameter_index` value of `0` specifies the first type parameter declaration.

* The `supertype_target` item indicates that an annotation appears on a type in the `extends` or `implements` clause of a class or interface declaration.

  ```text
  supertype_target {
      u2 supertype_index;
  }
  ```

  A `supertype_index` value of 65535 specifies that the annotation appears on the superclass in an `extends` clause of a class declaration.

  Any other `supertype_index` value is an index into the `interfaces` array of the enclosing `ClassFile` structure, and specifies that the annotation appears on that superinterface in either the `implements` clause of a class declaration or the `extends` clause of an interface declaration.

* The `type_parameter_bound_target` item indicates that an annotation appears on the _i_'th bound of the _j_'th type parameter declaration of a generic class, interface, method, or constructor.

  ```text
  type_parameter_bound_target {
      u1 type_parameter_index;
      u1 bound_index;
  }
  ```

  The value of the of `type_parameter_index` item specifies which type parameter declaration has an annotated bound. A `type_parameter_index` value of `0` specifies the first type parameter declaration.

  The value of the `bound_index` item specifies which bound of the type parameter declaration indicated by `type_parameter_index` is annotated. A `bound_index` value of `0` specifies the first bound of a type parameter declaration.

  The `type_parameter_bound_target` item records that a bound is annotated, but does not record the type which constitutes the bound. The type may be found by inspecting the class signature or method signature stored in the appropriate `Signature` attribute.

* The `empty_target` item indicates that an annotation appears on either the type in a field declaration, the return type of a method, the type of a newly constructed object, or the receiver type of a method or constructor.

  ```text
  empty_target {
  }
  ```

  Only one type appears in each of these locations, so there is no per-type information to represent in the `target_info` union.

* The `formal_parameter_target` item indicates that an annotation appears on the type in a formal parameter declaration of a method, constructor, or lambda expression.

  ```text
  formal_parameter_target {
      u1 formal_parameter_index;
  }
  ```

  The value of the `formal_parameter_index` item specifies which formal parameter declaration has an annotated type. A `formal_parameter_index` value of `0` specifies the first formal parameter declaration.

  The `formal_parameter_target` item records that a formal parameter's type is annotated, but does not record the type itself. The type may be found by inspecting the method descriptor \([§4.3.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3)\) of the `method_info` structure enclosing the `RuntimeVisibleTypeAnnotations` attribute. A `formal_parameter_index` value of `0` indicates the first parameter descriptor in the method descriptor.

* The `throws_target` item indicates that an annotation appears on the _i_'th type in the `throws` clause of a method or constructor declaration.

  ```text
  throws_target {
      u2 throws_type_index;
  }
  ```

  The value of the `throws_type_index` item is an index into the `exception_index_table` array of the `Exceptions` attribute of the `method_info` structure enclosing the `RuntimeVisibleTypeAnnotations` attribute.

* The `localvar_target` item indicates that an annotation appears on the type in a local variable declaration, including a variable declared as a resource in a `try`-with-resources statement.

  ```text
  localvar_target {
      u2 table_length;
      {   u2 start_pc;
          u2 length;
          u2 index;
      } table[table_length];
  }
  ```

  The value of the `table_length` item gives the number of entries in the `table` array. Each entry indicates a range of `code` array offsets within which a local variable has a value. It also indicates the index into the local variable array of the current frame at which that local variable can be found. Each entry contains the following three items:start\_pc, length

  The given local variable has a value at indices into the `code` array in the interval \[`start_pc`, `start_pc + length`\), that is, between `start_pc` inclusive and `start_pc + length` exclusive.index

  The given local variable must be at `index` in the local variable array of the current frame.

  If the local variable at `index` is of type `double` or `long`, it occupies both `index` and `index + 1`.

  A table is needed to fully specify the local variable whose type is annotated, because a single local variable may be represented with different local variable indices over multiple live ranges. The `start_pc`, `length`, and `index` items in each table entry specify the same information as a `LocalVariableTable` attribute.

  The `localvar_target` item records that a local variable's type is annotated, but does not record the type itself. The type may be found by inspecting the appropriate `LocalVariableTable` attribute.

* The `catch_target` item indicates that an annotation appears on the _i_'th type in an exception parameter declaration.

  ```text
  catch_target {
      u2 exception_table_index;
  }
  ```

  The value of the `exception_table_index` item is an index into the `exception_table` array of the `Code` attribute enclosing the `RuntimeVisibleTypeAnnotations` attribute.

  The possibility of more than one type in an exception parameter declaration arises from the multi-`catch` clause of the `try` statement, where the type of the exception parameter is a union of types \(JLS §14.20\). A compiler usually creates one `exception_table` entry for each type in the union, which allows the `catch_target` item to distinguish them. This preserves the correspondence between a type and its annotations.

* The `offset_target` item indicates that an annotation appears on either the type in an _instanceof_ expression or a _new_ expression, or the type before the `::` in a method reference expression.

  ```text
  offset_target {
      u2 offset;
  }
  ```

  The value of the `offset` item specifies the `code` array offset of either the _instanceof_ bytecode instruction corresponding to the _instanceof_ expression, the _new_ bytecode instruction corresponding to the _new_ expression, or the bytecode instruction corresponding to the method reference expression.

* The `type_argument_target` item indicates that an annotation appears either on the _i_'th type in a cast expression, or on the _i_'th type argument in the explicit type argument list for any of the following: a _new_ expression, an explicit constructor invocation statement, a method invocation expression, or a method reference expression.

  ```text
  type_argument_target {
      u2 offset;
      u1 type_argument_index;
  }
  ```

  The value of the `offset` item specifies the `code` array offset of either the bytecode instruction corresponding to the cast expression, the _new_ bytecode instruction corresponding to the _new_ expression, the bytecode instruction corresponding to the explicit constructor invocation statement, the bytecode instruction corresponding to the method invocation expression, or the bytecode instruction corresponding to the method reference expression.

  For a cast expression, the value of the `type_argument_index` item specifies which type in the cast operator is annotated. A `type_argument_index` value of `0` specifies the first \(or only\) type in the cast operator.

  The possibility of more than one type in a cast expression arises from a cast to an intersection type.

  For an explicit type argument list, the value of the `type_argument_index` item specifies which type argument is annotated. A `type_argument_index` value of `0` specifies the first type argument.

**4.7.20.2. The type\_path structure**

Wherever a type is used in a declaration or expression, the `type_path` structure identifies which part of the type is annotated. An annotation may appear on the type itself, but if the type is a reference type, then there are additional locations where an annotation may appear:

* If an array type T`[]` is used in a declaration or expression, then an annotation may appear on any component type of the array type, including the element type.
* If a nested type T1`.`T2 is used in a declaration or expression, then an annotation may appear on the name of the top level type or any member type.
* If a parameterized type T`<`A`>` or T`<`? extends A`>` or T`<`? super A`>` is used in a declaration or expression, then an annotation may appear on any type argument or on the bound of any wildcard type argument.

For example, consider the different parts of `String[][]` that are annotated in:

```text
@Foo String[][]   // Annotates the class type String
String @Foo [][]  // Annotates the array type String[][]
String[] @Foo []  // Annotates the array type String[]
```

or the different parts of the nested type `Outer.Middle.Inner` that are annotated in:

```text
@Foo Outer.Middle.Inner
Outer.@Foo Middle.Inner
Outer.Middle.@Foo Inner
```

or the different parts of the parameterized types `Map<String,Object>` and `List<...>` that are annotated in:

```text
@Foo Map<String,Object>
Map<@Foo String,Object>
Map<String,@Foo Object>

List<@Foo ? extends String>
List<? extends @Foo String>
```

The `type_path` structure has the following format:

```text
type_path {
    u1 path_length;
    {   u1 type_path_kind;
        u1 type_argument_index;
    } path[path_length];
}
```

The value of the `path_length` item gives the number of entries in the `path` array:

* If the value of `path_length` is `0`, then the annotation appears directly on the type itself.
* If the value of `path_length` is non-zero, then each entry in the `path` array represents an iterative, left-to-right step towards the precise location of the annotation in an array type, nested type, or parameterized type. \(In an array type, the iteration visits the array type itself, then its component type, then the component type of that component type, and so on, until the element type is reached.\) Each entry contains the following two items:type\_path\_kind

  The legal values for the `type_path_kind` item are listed in [Table 4.7.20.2-A](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20.2-220-B-A.1).

  **Table 4.7.20.2-A. Interpretation of `type_path_kind` values**

  | Value | Interpretation |
  | :--- | :--- |
  | `0` | Annotation is deeper in an array type |
  | `1` | Annotation is deeper in a nested type |
  | `2` | Annotation is on the bound of a wildcard type argument of a parameterized type |
  | `3` | Annotation is on a type argument of a parameterized type |

  
  type\_argument\_index

  If the value of the `type_path_kind` item is `0`, `1`, or `2`, then the value of the `type_argument_index` item is `0`.

  If the value of the `type_path_kind` item is `3`, then the value of the `type_argument_index` item specifies which type argument of a parameterized type is annotated, where `0` indicates the first type argument of a parameterized type.

**Table 4.7.20.2-B. `type_path` structures for `@A Map<@B ? extends @C String, @D List<@E Object>>`**

| Annotation | `path_length` | `path` |
| :--- | :--- | :--- |
| `@A` | `0` | `[]` |
| `@B` | `1` | `[{type_path_kind: 3; type_argument_index: 0}]` |
| `@C` | `2` | `[{type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 2; type_argument_index: 0}]` |
| `@D` | `1` | `[{type_path_kind: 3; type_argument_index: 1}]` |
| `@E` | `2` | `[{type_path_kind: 3; type_argument_index: 1}, {type_path_kind: 3; type_argument_index: 0}]` |

**Table 4.7.20.2-C. `type_path` structures for `@I String @F [] @G [] @H []`**

| Annotation | `path_length` | `path` |
| :--- | :--- | :--- |
| `@F` | `0` | `[]` |
| `@G` | `1` | `[{type_path_kind: 0; type_argument_index: 0}]` |
| `@H` | `2` | `[{type_path_kind: 0; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}]` |
| `@I` | `3` | `[{type_path_kind: 0; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}]` |

**Table 4.7.20.2-D. `type_path` structures for `@A List<@B Comparable<@F Object @C [] @D [] @E []>>`**

| Annotation | `path_length` | `path` |
| :--- | :--- | :--- |
| `@A` | `0` | `[]` |
| `@B` | `1` | `[{type_path_kind: 3; type_argument_index: 0}]` |
| `@C` | `2` | `[{type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 3; type_argument_index: 0}]` |
| `@D` | `3` | `[{type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}]` |
| `@E` | `4` | `[{type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}]` |
| `@F` | `5` | `[{type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}]` |

**Table 4.7.20.2-E. `type_path` structures for `@C Outer . @B Middle . @A Inner`**

| Annotation | `path_length` | `path` |
| :--- | :--- | :--- |
| `@A` | `2` | `[{type_path_kind: 1; type_argument_index: 0}, {type_path_kind: 1; type_argument_index: 0}]` |
| `@B` | `1` | `[{type_path_kind: 1; type_argument_index: 0}]` |
| `@C` | `0` | `[]` |

**Table 4.7.20.2-F. `type_path` structures for `Outer . Middle<@D Foo . @C Bar> . Inner<@B String @A []>`**

| Annotation | `path_length` | `path` |
| :--- | :--- | :--- |
| `@A` | `3` | `[{type_path_kind: 1; type_argument_index: 0}, {type_path_kind: 1; type_argument_index: 0}, {type_path_kind: 3; type_argument_index: 0}]` |
| `@B` | `4` | `[{type_path_kind: 1; type_argument_index: 0}, {type_path_kind: 1; type_argument_index: 0}, {type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 0; type_argument_index: 0}]` |
| `@C` | `3` | `[{type_path_kind: 1; type_argument_index: 0}, {type_path_kind: 3; type_argument_index: 0}, {type_path_kind: 1; type_argument_index: 0}]` |
| `@D` | `2` | `[{type_path_kind: 1; type_argument_index: 0}, {type_path_kind: 3; type_argument_index: 0}]` |

#### 4.7.21. The `RuntimeInvisibleTypeAnnotations` Attribute

The `RuntimeInvisibleTypeAnnotations` attribute is an variable-length attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure, or `Code` attribute \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1), [§4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5), [§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6), [§4.7.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.3)\). The `RuntimeInvisibleTypeAnnotations` attribute records run-time invisible annotations on types used in the corresponding declaration of a class, field, or method, or in an expression in the corresponding method body. The `RuntimeInvisibleTypeAnnotations` attribute also records annotations on type parameter declarations of generic classes, interfaces, methods, and constructors.

There may be at most one `RuntimeInvisibleTypeAnnotations` attribute in the `attributes` table of a `ClassFile`, `field_info`, or `method_info` structure, or `Code` attribute.

An `attributes` table contains a `RuntimeInvisibleTypeAnnotations` attribute only if types are annotated in kinds of declaration or expression that correspond to the parent structure or attribute of the `attributes` table.

The `RuntimeInvisibleTypeAnnotations` attribute has the following format:

```text
RuntimeInvisibleTypeAnnotations_attribute {
    u2              attribute_name_index;
    u4              attribute_length;
    u2              num_annotations;
    type_annotation annotations[num_annotations];
}
```

The items of the `RuntimeInvisibleTypeAnnotations_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure representing the string "`RuntimeInvisibleTypeAnnotations`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.num\_annotations

The value of the `num_annotations` item gives the number of run-time invisible type annotations represented by the structure.annotations\[\]

Each entry in the `annotations` table represents a single run-time invisible annotation on a type used in a declaration or expression. The `type_annotation` structure is specified in [§4.7.20](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.20).

#### 4.7.22. The `AnnotationDefault` Attribute

The `AnnotationDefault` attribute is a variable-length attribute in the `attributes` table of certain `method_info` structures \([§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\), namely those representing elements of annotation types \(JLS §9.6.1\). The `AnnotationDefault` attribute records the default value \(JLS §9.6.2\) for the element represented by the `method_info` structure. The Java Virtual Machine must make this default value available so it can be applied by appropriate reflective APIs.

There may be at most one `AnnotationDefault` attribute in the `attributes` table of a `method_info` structure which represents an element of an annotation type.

The `AnnotationDefault` attribute has the following format:

```text
AnnotationDefault_attribute {
    u2            attribute_name_index;
    u4            attribute_length;
    element_value default_value;
}
```

The items of the `AnnotationDefault_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`AnnotationDefault`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.default\_value

The `default_value` item represents the default value of the annotation type element represented by the `method_info` structure enclosing this `AnnotationDefault` attribute.

#### 4.7.23. The `BootstrapMethods` Attribute

The `BootstrapMethods` attribute is a variable-length attribute in the `attributes` table of a `ClassFile` structure \([§4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1)\). The `BootstrapMethods` attribute records bootstrap method specifiers referenced by _invokedynamic_ instructions \([§_invokedynamic_](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.invokedynamic)\).

There must be exactly one `BootstrapMethods` attribute in the `attributes` table of a `ClassFile` structure if the `constant_pool` table of the `ClassFile` structure has at least one `CONSTANT_InvokeDynamic_info` entry \([§4.4.10](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.10)\).

There may be at most one `BootstrapMethods` attribute in the `attributes` table of a `ClassFile` structure.

The `BootstrapMethods` attribute has the following format:

```text
BootstrapMethods_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u2 num_bootstrap_methods;
    {   u2 bootstrap_method_ref;
        u2 num_bootstrap_arguments;
        u2 bootstrap_arguments[num_bootstrap_arguments];
    } bootstrap_methods[num_bootstrap_methods];
}
```

The items of the `BootstrapMethods_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure \([§4.4.7](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.7)\) representing the string "`BootstrapMethods`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.

The value of the `attribute_length` item is thus dependent on the number of _invokedynamic_ instructions in this `ClassFile` structure.num\_bootstrap\_methods

The value of the `num_bootstrap_methods` item determines the number of bootstrap method specifiers in the `bootstrap_methods` array.bootstrap\_methods\[\]

Each entry in the `bootstrap_methods` table contains an index to a `CONSTANT_MethodHandle_info` structure \([§4.4.8](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.8)\) which specifies a bootstrap method, and a sequence \(perhaps empty\) of indexes to _static arguments_ for the bootstrap method.

Each `bootstrap_methods` entry must contain the following three items:bootstrap\_method\_ref

The value of the `bootstrap_method_ref` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_MethodHandle_info` structure \([§4.4.8](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.8)\).

The form of the method handle is driven by the continuing resolution of the call site specifier in [§_invokedynamic_](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.invokedynamic), where execution of `invoke` in `java.lang.invoke.MethodHandle` requires that the bootstrap method handle be adjustable to the actual arguments being passed, as if by a call to `java.lang.invoke.MethodHandle.asType`. Accordingly, the `reference_kind` item of the `CONSTANT_MethodHandle_info` structure should have the value 6 or 8 \([§5.4.3.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.4.3.5)\), and the `reference_index` item should specify a static method or constructor that takes three arguments of type `java.lang.invoke.MethodHandles.Lookup`, `String`, and `java.lang.invoke.MethodType`, in that order. Otherwise, invocation of the bootstrap method handle during call site specifier resolution will complete abruptly.num\_bootstrap\_arguments

The value of the `num_bootstrap_arguments` item gives the number of items in the `bootstrap_arguments` array.bootstrap\_arguments\[\]

Each entry in the `bootstrap_arguments` array must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_String_info`, `CONSTANT_Class_info`, `CONSTANT_Integer_info`, `CONSTANT_Long_info`, `CONSTANT_Float_info`, `CONSTANT_Double_info`, `CONSTANT_MethodHandle_info`, or `CONSTANT_MethodType_info` structure \([§4.4.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.3), [§4.4.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.1), [§4.4.4](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.4), [§4.4.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.5), [§4.4.8](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.8), [§4.4.9](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.9)\).

#### 4.7.24. The `MethodParameters` Attribute

The `MethodParameters` attribute is a variable-length attribute in the `attributes` table of a `method_info` structure \([§4.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.6)\). A `MethodParameters` attribute records information about the formal parameters of a method, such as their names.

There may be at most one `MethodParameters` attribute in the `attributes` table of a `method_info` structure.

The `MethodParameters` attribute has the following format:

```text
MethodParameters_attribute {
    u2 attribute_name_index;
    u4 attribute_length;
    u1 parameters_count;
    {   u2 name_index;
        u2 access_flags;
    } parameters[parameters_count];
}
```

The items of the `MethodParameters_attribute` structure are as follows:attribute\_name\_index

The value of the `attribute_name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure representing the string "`MethodParameters`".attribute\_length

The value of the `attribute_length` item indicates the length of the attribute, excluding the initial six bytes.parameters\_count

The value of the `parameters_count` item indicates the number of parameter descriptors in the method descriptor \([§4.3.3](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.3)\) referenced by the `descriptor_index` of the attribute's enclosing `method_info` structure.

This is not a constraint which a Java Virtual Machine implementation must enforce during format checking \([§4.8](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.8)\). The task of matching parameter descriptors in a method descriptor against the items in the `parameters` array below is done by the reflection libraries of the Java SE platform.parameters\[\]

Each entry in the `parameters` array contains the following pair of items:name\_index

The value of the `name_index` item must either be zero or a valid index into the `constant_pool` table.

If the value of the `name_index` item is zero, then this `parameters` element indicates a formal parameter with no name.

If the value of the `name_index` item is nonzero, the `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure representing a valid unqualified name denoting a formal parameter \([§4.2.2](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2.2)\).access\_flags

The value of the `access_flags` item is as follows:0x0010 \(`ACC_FINAL`\)

Indicates that the formal parameter was declared `final`.0x1000 \(`ACC_SYNTHETIC`\)

Indicates that the formal parameter was not explicitly or implicitly declared in source code, according to the specification of the language in which the source code was written \(JLS §13.1\). \(The formal parameter is an implementation artifact of the compiler which produced this `class` file.\)0x8000 \(`ACC_MANDATED`\)

Indicates that the formal parameter was implicitly declared in source code, according to the specification of the language in which the source code was written \(JLS §13.1\). \(The formal parameter is mandated by a language specification, so all compilers for the language must emit it.\)

The _i_'th entry in the `parameters` array corresponds to the _i_'th parameter descriptor in the enclosing method's descriptor. \(The `parameters_count` item is one byte because a method descriptor is limited to 255 parameters.\) Effectively, this means the `parameters` array stores information for all the parameters of the method. One could imagine other schemes, where entries in the `parameters` array specify their corresponding parameter descriptors, but it would unduly complicate the `MethodParameters` attribute.

The _i_'th entry in the `parameters` array may or may not correspond to the _i_'th type in the enclosing method's `Signature` attribute \(if present\), or to the _i_'th annotation in the enclosing method's parameter annotations.

