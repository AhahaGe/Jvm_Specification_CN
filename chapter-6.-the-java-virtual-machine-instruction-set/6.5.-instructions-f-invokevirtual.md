# 6.5. Instructions \(c\)

#### _caload_

**Operation**

Load `char` from array

**Format**

  
_caload_  


**Forms**

_caload_ = 52 \(0x34\)

**Operand Stack**

..., _arrayref_, _index_ →

..., _value_

**Description**

The _arrayref_ must be of type `reference` and must refer to an array whose components are of type `char`. The _index_ must be of type `int`. Both _arrayref_ and _index_ are popped from the operand stack. The component of the array at _index_ is retrieved and zero-extended to an `int` _value_. That _value_ is pushed onto the operand stack.

**Run-time Exceptions**

If _arrayref_ is `null`, _caload_ throws a `NullPointerException`.

Otherwise, if _index_ is not within the bounds of the array referenced by _arrayref_, the _caload_ instruction throws an `ArrayIndexOutOfBoundsException`.

#### _castore_

**Operation**

Store into `char` array

**Format**

  
_castore_  


**Forms**

_castore_ = 85 \(0x55\)

**Operand Stack**

..., _arrayref_, _index_, _value_ →

...

**Description**

The _arrayref_ must be of type `reference` and must refer to an array whose components are of type `char`. The _index_ and the _value_ must both be of type `int`. The _arrayref_, _index_, and _value_ are popped from the operand stack. The `int` _value_ is truncated to a `char` and stored as the component of the array indexed by _index_.

**Run-time Exceptions**

If _arrayref_ is `null`, _castore_ throws a `NullPointerException`.

Otherwise, if _index_ is not within the bounds of the array referenced by _arrayref_, the _castore_ instruction throws an `ArrayIndexOutOfBoundsException`.

#### _checkcast_

**Operation**

Check whether object is of given type

**Format**

  
_checkcast_  
_indexbyte1_  
_indexbyte2_  


**Forms**

_checkcast_ = 192 \(0xc0\)

**Operand Stack**

..., _objectref_ →

..., _objectref_

**Description**

The _objectref_ must be of type `reference`. The unsigned _indexbyte1_ and _indexbyte2_ are used to construct an index into the run-time constant pool of the current class \([§2.6](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.6)\), where the value of the index is \(_indexbyte1_ `<<` 8\) \| _indexbyte2_. The run-time constant pool item at the index must be a symbolic reference to a class, array, or interface type.

If _objectref_ is `null`, then the operand stack is unchanged.

Otherwise, the named class, array, or interface type is resolved \([§5.4.3.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.4.3.1)\). If _objectref_ can be cast to the resolved class, array, or interface type, the operand stack is unchanged; otherwise, the _checkcast_ instruction throws a `ClassCastException`.

The following rules are used to determine whether an _objectref_ that is not `null` can be cast to the resolved type: if S is the class of the object referred to by _objectref_ and T is the resolved class, array, or interface type, _checkcast_ determines whether _objectref_ can be cast to type T as follows:

* If S is an ordinary \(nonarray\) class, then:
  * If T is a class type, then S must be the same class as T, or S must be a subclass of T;
  * If T is an interface type, then S must implement interface T.
* If S is an interface type, then:
  * If T is a class type, then T must be `Object`.
  * If T is an interface type, then T must be the same interface as S or a superinterface of S.
* If S is a class representing the array type SC`[]`, that is, an array of components of type SC, then:
  * If T is a class type, then T must be `Object`.
  * If T is an interface type, then T must be one of the interfaces implemented by arrays \(JLS §4.10.3\).
  * If T is an array type TC`[]`, that is, an array of components of type TC, then one of the following must be true:
    * TC and SC are the same primitive type.
    * TC and SC are reference types, and type SC can be cast to TC by recursive application of these rules.

**Linking Exceptions**

During resolution of the symbolic reference to the class, array, or interface type, any of the exceptions documented in [§5.4.3.1](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.4.3.1) can be thrown.

**Run-time Exception**

Otherwise, if _objectref_ cannot be cast to the resolved class, array, or interface type, the _checkcast_ instruction throws a `ClassCastException`.

**Notes**

The _checkcast_ instruction is very similar to the _instanceof_ instruction \([§_instanceof_](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.instanceof)\). It differs in its treatment of `null`, its behavior when its test fails \(_checkcast_ throws an exception, _instanceof_ pushes a result code\), and its effect on the operand stack.  


